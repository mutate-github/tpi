#!/bin/sh

SRV=$1
SID=$2
DT=$3

[ -z "$DT" ] && DT=$(date -d '1 days ago' +%d/%m/%y-00:00-240)
DT3=$(date -d '3 days ago' +%d/%m/%y-00:00-240)

echo '--------------------------------------------------------------------------------------------------------------------------------------------------------------------'
rtpi $SRV $SID db
echo '--------------------------------------------------------------------------------------------------------------------------------------------------------------------'
rtpi $SRV $SID db nls
echo '--------------------------------------------------------------------------------------------------------------------------------------------------------------------'
rtpi $SRV $SID db option
echo '--------------------------------------------------------------------------------------------------------------------------------------------------------------------'
rtpi $SRV $SID db properties
echo '--------------------------------------------------------------------------------------------------------------------------------------------------------------------'
rtpi $SRV $SID db fusage
echo '--------------------------------------------------------------------------------------------------------------------------------------------------------------------'
rtpi $SRV $SID u % role DBA
echo '--------------------------------------------------------------------------------------------------------------------------------------------------------------------'
rtpi $SRV $SID size tbs
rtpi $SRV $SID size tbs free
rtpi $SRV $SID size df
rtpi $SRV $SID size sysaux
echo '--------------------------------------------------------------------------------------------------------------------------------------------------------------------'
rtpi $SRV $SID size
rtpi $SRV $SID arch
echo '--------------------------------------------------------------------------------------------------------------------------------------------------------------------'
rtpi $SRV $SID scheduler autotask
echo '--------------------------------------------------------------------------------------------------------------------------------------------------------------------'
rtpi $SRV $SID pipe
echo '--------------------------------------------------------------------------------------------------------------------------------------------------------------------'
rtpi $SRV $SID p memory_target sga_target db_cache_size shared_pool_size pga_aggregate_target workarea_size_policy sort_area_size
rtpi $SRV $SID sga
echo '--------------------------------------------------------------------------------------------------------------------------------------------------------------------'
rtpi $SRV $SID p FALSE %
echo '--------------------------------------------------------------------------------------------------------------------------------------------------------------------'
rtpi $SRV $SID p audit
rtpi $SRV $SID s 'AUD$'
rtpi $SRV $SID audit
rtpi $SRV $SID audit login
rtpi $SRV $SID job | egrep 'dba_jobs information|AUD|--------|FAILURES'
rtpi $SRV $SID scheduler | egrep "AUD|--------|JOB_NAME" | grep AUD -B 2
echo '--------------------------------------------------------------------------------------------------------------------------------------------------------------------'
rtpi $SRV $SID p contorl_file
echo '--------------------------------------------------------------------------------------------------------------------------------------------------------------------'
rtpi $SRV $SID redo logs
echo '--------------------------------------------------------------------------------------------------------------------------------------------------------------------'
rtpi $SRV $SID fra
rtpi $SRV $SID p db_recovery_file_dest  db_flashback_retention_target
echo '--------------------------------------------------------------------------------------------------------------------------------------------------------------------'
rtpi $SRV $SID rman cfg
rtpi $SRV $SID rman 7
echo '--------------------------------------------------------------------------------------------------------------------------------------------------------------------'
rtpi $SRV $SID u % sys ALTER SYSTEM
rtpi $SRV $SID u % sys ALTER DATABASE
rtpi $SRV $SID u % sys ALTER DATABASE
rtpi $SRV $SID u % sys DROP ANY TRIGGER
rtpi $SRV $SID u % sys DROP ANY PROCEDURE
rtpi $SRV $SID u % sys DROP ANY TABLE
rtpi $SRV $SID u % sys ALTER ANY PROCEDURE
rtpi $SRV $SID u % sys DELETE ANY TABLE
rtpi $SRV $SID u % sys UPDATE ANY TABLE
rtpi $SRV $SID u % sys INSERT ANY TABLE
rtpi $SRV $SID u % sys CREATE USER
rtpi $SRV $SID u % sys BECOME USER
rtpi $SRV $SID u % sys ALTER USER
rtpi $SRV $SID u % sys DROP USER
echo '--------------------------------------------------------------------------------------------------------------------------------------------------------------------'
echo "rtpi $SRV $SID o invalid | sed  -e '/Elapsed/q'"
rtpi $SRV $SID o invalid | sed  -e '/Elapsed/q'
echo '--------------------------------------------------------------------------------------------------------------------------------------------------------------------'
rtpi $SRV $SID scheduler
rtpi $SRV $SID scheduler run % 48 | awk '/FAILED/{ f[$7"-"$1"."$2]++ } END { for (i in f)  printf "%-60s %-10s %-10s\n", i, " - FAILED: ",f[i]}' | sort
echo '--------------------------------------------------------------------------------------------------------------------------------------------------------------------'
rtpi $SRV $SID job
echo '--------------------------------------------------------------------------------------------------------------------------------------------------------------------'
echo "rtpi $SRV $SID oratop h | diagram.sh  3 6 7  11 13 14 15 17 18 19 20 22 23 24"
rtpi $SRV $SID oratop h | diagram.sh  3 6 7  11 13 14 15 17 18 19 20 22 23 24
echo '--------------------------------------------------------------------------------------------------------------------------------------------------------------------'
echo "rtpi $SRV $SID oratop dhsh | diagram.sh 2 5 6 9 10 11 13 14 15 17 18 21 23 24"
rtpi $SRV $SID oratop dhsh | diagram.sh 2 5 6 9 10 11 13 14 15 17 18 21 23 24
echo '--------------------------------------------------------------------------------------------------------------------------------------------------------------------'
rtpi $SRV $SID ash 
rtpi $SRV $SID ash event
rtpi $SRV $SID ash mchart
echo "rtpi $SRV $SID ash tchart | diagram.sh  2 3 6 7 8 9 10 13 16"
rtpi $SRV $SID ash tchart | diagram.sh  2 3 6 7 8 9 10 13 16
echo '--------------------------------------------------------------------------------------------------------------------------------------------------------------------'
rtpi $SRV $SID dhash 
rtpi $SRV $SID dhash event
rtpi $SRV $SID dhash $DT mchart
echo "rtpi $SRV $SID dhash $DT tchart | diagram.sh  2 3 6 7 8 9 10 13 16"
rtpi $SRV $SID dhash $DT tchart | diagram.sh  2 3 6 7 8 9 10 13 16
rtpi $SRV $SID dhash $DT3 iostat | diagram.sh
echo '--------------------------------------------------------------------------------------------------------------------------------------------------------------------'
rtpi $SRV $SID dhash $DT sql
echo '--------------------------------------------------------------------------------------------------------------------------------------------------------------------'
echo '--------------------------------------------------------------------------------------------------------------------------------------------------------------------'

